<!doctype html>
{% extends "conectado_base.html" %}
{% load quiz_tags %}
{% load i18n %}
{% load staticfiles%}

{% block barra-lateral %}

<div class="col-md-2 d-none d-md-block bg-light sidebar">
  <div class="sidebar-sticky">

    <div class="bd-search d-flex align-items-center">
      <a class="bd-toc-link"></a>
      <button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg>
      </button>
    </div>

    <ul class="nav flex-column">
        <a class="nav-link active" href="{% url 'conectado' %}">
          <span data-feather="home"></span>
          Início
        </a>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'quiz_index' %}">
          <span data-feather="file"></span>
          Exercícios
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'simulado_lista' %}">
          <span data-feather="layers"></span>
          Simulados
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'quiz_progress' %}">
          <span data-feather="bar-chart-2"></span>
          Progresso
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'perfil' %}">
          <span data-feather="users"></span>
          Perfil
        </a>
      </li>
    </ul>

    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
      <!-- <span>Favoritos</span>
        <a class="d-flex align-items-center text-muted" href="#">
        <span data-feather="plus-circle"></span>
      </a> -->
    </h6>
    <ul class="nav flex-column mb-2">
      <li class="nav-item">
        <a class="nav-link" href="{% url 'lista_artigos' %}">
          <span data-feather="file-text"></span>
          Resumos Médicos
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'lista_termos' %}">
          <span data-feather="book-open"></span>
          Dicionário Médico
        </a>
      </li>
    </ul>
  </div>
</div>

{% endblock %}

{% block conteudo %}

<main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">Bem Vindo, {{user}}</h1>
    <!-- <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <button class="btn btn-sm btn-outline-secondary">Share</button>
        <button class="btn btn-sm btn-outline-secondary">Export</button>
      </div>
      <button class="btn btn-sm btn-outline-secondary dropdown-toggle">
        <span data-feather="calendar"></span>
        This week
      </button>
    </div> -->
  </div>

  <!-- <canvas class="my-4" id="myChart" width="900" height="380"></canvas> -->
  <p>Abaixo você confere a porcentagem de acertos em cada categoria, mais detalhes podem ser acompanhados na página <a href="{% url 'quiz_progress' %}">Progresso</a></p>

  <div class="row">
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart1" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart2" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart3" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart4" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart5" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart6" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart7" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart8" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart9" width="900" height="300"></canvas>
    </div>
    <div class="col-md-4">
        <canvas class="my-4" id="exerciciosChart10" width="900" height="300"></canvas>
    </div>
  </div>

{% endblock %}

{% block grafico %}

{% if cat_scores %}

<h2>{{ cat }}</h2>
<script>
  // var ctx = document.getElementById("myChart");
  // var myChart = new Chart(ctx, {
  //   type: 'line',
  //   data: {
  //     labels: ["Acertos", "Erros", "Percentagem"],
  //     datasets: [{
  //       data: ["{{value.0}}", "{{value.1}}", "{{value.2}}"],
  //       lineTension: 0,
  //       backgroundColor: 'transparent',
  //       borderColor: '#ff9400',
  //       borderWidth: 4,
  //       pointBackgroundColor: '#ff9400'
  //     }]
  //   },
  //   options: {
  //     scales: {
  //       yAxes: [{
  //         ticks: {
  //           beginAtZero: false
  //         }
  //       }]
  //     },
  //     legend: {
  //       display: false,
  //     }
  //   }
  // });

"{% for cat, value in cat_scores.items %}"
  var ctx = document.getElementById("exerciciosChart{{ forloop.counter }}");
    var exerciciosChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ["{{ cat }}", ""],
            datasets: [{
                label: '',
                data: ["{{ value.2 }}", 100],
                backgroundColor: [
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(255, 159, 64, 0)',

                ],
                borderColor: [
                    'rgba(255, 159, 64, 1)',
                    'rgba(255, 159, 64, 0)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
    });
"{% endfor %}"
</script>

{% endif %}

<!-- {% if exams %}
  <tr>
  <td>{{ exam.quiz.title }}</td>
  <td>{{ exam.current_score }}</td>
  <td>{{ exam.get_max_score }}</td>
  <td>{{ exam.get_percent_correct }}</td>
  </tr>
{% endif %} -->

{% endblock %}
